import { ISignal } from '../ISignal';
import { ISignalEventsObserver } from '../ISignalEventsObserver';
import { Track, AcceptRoleChangeParams, RequestForRoleChangeParams, TrackUpdateRequestParams, RemovePeerRequest, MultiTrackUpdateRequestParams, StartRTMPOrRecordingRequestParams } from '../interfaces';
import { HMSConnectionRole } from '../../connection/model';
import AnalyticsEvent from '../../analytics/AnalyticsEvent';
import Message from '../../sdk/models/HMSMessage';
export default class JsonRpcSignal implements ISignal {
    private readonly TAG;
    readonly observer: ISignalEventsObserver;
    /**
     * Sometimes before [join] is completed, there could be a lot of trickles
     * Sending [HMSTrickle]` before [join] web socket message leads to
     * error: [500] no rtc transport exists for this Peer
     *
     * We keep a list of pending trickles and send them immediately after [join]
     * is done.
     */
    private isJoinCompleted;
    private pendingTrickle;
    private socket;
    private callbacks;
    private _isConnected;
    get isConnected(): boolean;
    private id;
    set isConnected(newValue: boolean);
    constructor(observer: ISignalEventsObserver);
    private call;
    private notify;
    open(uri: string): Promise<void>;
    close(): Promise<void>;
    join(name: string, data: string, offer: RTCSessionDescriptionInit, disableVidAutoSub: boolean): Promise<RTCSessionDescriptionInit>;
    trickle(target: HMSConnectionRole, candidate: RTCIceCandidateInit): void;
    offer(desc: RTCSessionDescriptionInit, tracks: Map<string, any>): Promise<RTCSessionDescriptionInit>;
    answer(desc: RTCSessionDescriptionInit): void;
    trackUpdate(tracks: Map<string, Track>): void;
    broadcast(message: Message): Promise<void>;
    recordStart(): void;
    recordEnd(): void;
    leave(): void;
    endRoom(lock: boolean, reason: string): Promise<void>;
    sendEvent(event: AnalyticsEvent): void;
    ping(timeout: number): Promise<number>;
    requestRoleChange(params: RequestForRoleChangeParams): Promise<void>;
    acceptRoleChangeRequest(params: AcceptRoleChangeParams): Promise<void>;
    requestTrackStateChange(params: TrackUpdateRequestParams): Promise<void>;
    requestMultiTrackStateChange(params: MultiTrackUpdateRequestParams): Promise<void>;
    removePeer(params: RemovePeerRequest): Promise<void>;
    startRTMPOrRecording(params: StartRTMPOrRecordingRequestParams): Promise<void>;
    stopRTMPAndRecording(): Promise<void>;
    private onCloseHandler;
    private onMessageHandler;
    private pingPongLoop;
}
